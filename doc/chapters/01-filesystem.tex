\chapter{File System}
\label{filesystem}
The SD card is connected via SPI and is necessary for logging and external config. If no SD-Card is present, the internal config will be used, but no logging will be done. The internal config will always be overridden by the externel config at startup if available.


\begin{tabular}{ll}
\begin{minipage}[t]{0.5\textwidth}
File Tree SD-Card:
\dirtree{%
.1 /.
.2 config/.
.3 control.json.
.3 wifi.json.
.2 log/.
.3 channel1.log.
.3 channel2.log.
.3 channel3.log.
.3 channel4.log.
.3 event-log.log.
}
\end{minipage}
& \begin{minipage}[t]{0.5\textwidth}
File Tree Internal SPIFFS:
\dirtree{%
.1 /.
.2 control.json.
.2 wifi.json.
}
\end{minipage}

\end{tabular}


\vspace{0.5cm}
\textbf{control.json}

Contains information about the channels and their operation. Names, humidity thresholds and operation modes (moisture control/time control/disabled) are stored here for the ESP to act upon and to display in the web interface. The log\_enable keys can be used to enable or disable logging for this channel. (SD only)\\
Default is enabled, errors will always be logged if SD is available. 

\vspace{0.5cm}
\textbf{wifi.json}

Contains all necessary information for wifi-usage, like SSID, password and if the ESP should be in station mode (client inside existing network), or in AccessPoint-Mode (creating its own network). Default is AP-Mode.

\vspace{0.5cm}
\textbf{Logfiles}

If logging is enabled, the ADC-values (hourly) and watering-events will be logged. This way long-term data about the moisture and water usage can be obtained for further fine-tuning. In the event-log, important events will be logged as well, like page loads, spill detects, container empty etc. 